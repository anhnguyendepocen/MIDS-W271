'experience','raceColor')])
na.index[na.index]=1
heatmap(1-t(na.index))
sum(is.na(data$rural))
sum(is.na(data$city))
m4.5 <- lm(logWage ~ education+experience+experienceSquare+raceColor+dad_education+mom_education+rural+city, data=data)
m4.5.2 <- lm(logWage ~ education+experience+experienceSquare+raceColor+dad_education+mom_education+rural+city, data=data)
summary(m4.5.2)
boxplot(data[,c('mom_education','dad_education')])
data <- read.csv("WageData2.csv", header = TRUE)
str(data)
# show simple univariate stats for each variable
data$logWage <- log(data$wage)
data$experienceSquare <- data$experience^2
mom_educ_mean <- mean(data$mom_education, na.rm=T)
dad_educ_mean <- mean(data$dad_education, na.rm=T)
m_miss = is.na(data$mom_education)
d_miss = is.na(data$dad_education)
data$dad_education_fill = data$dad_education
data$mom_education_fill = data$mom_education
data$mom_education_fill[m_miss] = mom_educ_mean
data$dad_education_fill[d_miss] = dad_educ_mean
View(data)
m4.5.3 <- lm(logWage ~ education+experience+experienceSquare+raceColor
+dad_education_fill+mom_education_fill+rural+city, data=data)
summary(m4.5.3)
m4.4.mom <- lm(mom_education~education+experience+raceColor, data=data)
summary(m4.4.mom)
m4.4.mom
m4.4.mom$assign
?predict.lm
data[is.na(data$mom_education)]
data[is.na(data$mom_education),]
length(data[is.na(data$mom_education),])
test<-data[is.na(data$mom_education),]
predict.lm(m4.4.mom,data[is.na(data$mom_education),])
fill <- predict.lm(m4.4.mom,data[is.na(data$mom_education),])
m4.5.4.mom <- lm(mom_education~education+experience+raceColor, data=data)
m4.5.4.dad <- lm(dad_education~education+experience+raceColor, data=data)
m_miss = is.na(data$mom_education)
d_miss = is.na(data$dad_education)
fill_mom <- predict.lm(m4.5.4.mom, data[m_miss,])
fill_dad <- predict.lm(m4.5.4.dad, data[d_miss,])
data$dad_education_fill = data$dad_education
data$mom_education_fill = data$mom_education
data$mom_education_fill[m_miss] = fill_mom
data$dad_education_fill[d_miss] = fill_dad
m4.5.4 <- lm(logWage ~ education+experience+experienceSquare+raceColor
+dad_education_fill+mom_education_fill+rural+city, data=data)
summary(m4.5.4)
summary(m4.5.4.mom)
summary(m4.5.4.mom)
summary(m4.5.4.dad)
summary(m4.5.4)
summary(m4.5.4.mom)
summary(m4.5.4.dad)
m4.6.3 <- ivreg(logWage ~ education+experience+experienceSquare+raceColor
+dad_education+mom_education+rural+city | z1+z2, data = data)
summary(4.6.3)
?ivreg
??ivreg
library(AER)
m4.6.3 <- ivreg(logWage ~ education+experience+experienceSquare+raceColor
+dad_education+mom_education+rural+city | z1+z2, data = data)
summary(4.6.3)
summary(m4.6.3)
?ivreg
m4.6.3 <- ivreg(logWage ~ education+experience+experienceSquare+raceColor
+dad_education+mom_education+rural+city | z1+z2, data = data)
summary(m4.6.3)
m4.6.3 <- ivreg(logWage ~ education+experience+experienceSquare+raceColor
+dad_education+mom_education+rural+city | z1, data = data)
summary(m4.6.3)
setwd("~/Desktop/W271Data")
library(car)
library(AER)
library(sandwich)
library(ivpack) # use ivpack to get robust standard errors for IV regression
library(stargazer) # use stargazer for professional regression tables
install.packages('stargazer')
library(stargazer) # use stargazer for professional regression tables
library(foreign)
Q_full = read.dta("QOB_full.dta")
Q_full = read.dta("QOB_full.dta")
names(Q_full)
Q = Q_full[, c(1,2,4,5,6,9,10,11,12,13,16,18,19,20,21,24,25,27)]
names(Q) = c("age", "ageq", "educ", "enocent", "esocent", "lwklywge",
"married", "midatl", "mt", "neweng", "census", "qob",
"race", "smsa", "soatl", "wnocent", "wsocent", "yob")
summary(Q)
summary(Q$yob)
hist(Q$yob)
Q$yob2 = Q$yob %% 100
hist(Q$yob2)
summary(Q$ageq)
hist(Q$ageq)
Q$ageq2= Q$ageq %% 100
summary(Q$ageq2)
hist(Q$ageq2)
plot(Q[sample(nrow(Q), 1000),c("yob2","ageq2")])
summary(Q$lwklywge)
# To get a sense of scale, take the exponent of this variable
summary(exp(Q$lwklywge))
# Wages range from 10 cents to 75 thousand dollars.
hist(Q$lwklywge, breaks = 100)
# There are a few outliers on both sides of the distribution
# We can look at a few of the smallest values to get a sense of
# whether they're meaningful
head(sort(exp(Q$lwklywge)), 100)
# The lowest wage is about 10 cents an hour. We might worry if this
# is an error, but notice that the values increase fairly smoothly
# above this point.
# Let's visualize the relationship between yob and log weekly wage
by(Q$lwklywge, Q$yob2, mean)
plot( c(1920:1949), by(Q$lwklywge, Q$yob2, mean), xlab = "Year of Birth",
ylab = "Log Wage")
# Notive the discontinuity at 1930.  Once again, this is because data for
# men born in the 20's comes from the 1970 census, while data for other men
# comes from the 1980 census, so these two groups are not comparable.
# In accordance with Angrist and Krueger (1991), we look at one decade
# of individuals at a time.  As the authors explain, the subset of men born
# in the 1930's is especially fruitful for study, because the average wage
# for men is roughly flat through this decade, then declines for men born
# in the 40's.
Q30 = Q[Q$yob2 > 29 & Q$yob2 < 40,]
summary(Q30)
nrow(Q30)
# Lets create a graph of log wages by quarter of birth, to visually
# assess whether there's a relationship.
# To do this, we examine the quarter of birth variable, to see how
# it relates to age in quarters.
summary(Q30$qob)
head(Q30[,c("ageq2","qob")], 10)
# Starting from the lowest value of ageq2, which is 40.25, quarter of
# birth is 4, 3, 2, 1, 4 and so on.
# We can now create the graph
plot( seq(40.25,50, by = .25), by(Q30$lwklywge, Q30$ageq2, mean), xlab = "Age in Quarters",
ylab = "Log Wage", col = c("red", "green","blue", "black"),
pch = c(15, 16, 17, 18))
lines( seq(40.25,50, by = .25), by(Q30$lwklywge, Q30$ageq2, mean) , lty=2, col="red")
legend("bottomright", c("4th qtr.", "3rd qtr.", "2nd qtr.", "1st qtr."), cex=1.0, bty="n",
col=c("red", "green","blue", "black"),pch = c(15, 16, 17, 18))
# Notice the consistent pattern, with the black diamonds representing
# first quarter births consistently lower than the others.
##### Instrumental Variable Estimation
ols_model0 = lm(lwklywge ~ educ, data = Q30)
plot(ols_model0)
coeftest(first_stage, vcov = vcovHC)
coeftest(ols_model0, vcov = vcovHC)
first_stage = lm(educ ~ factor(qob), data = Q30)
coeftest(first_stage, vcov = vcovHC)
second_stage = lm(Q30$lwklywge ~ first_stage$fitted)
summary(second_stage)
m4.6.3 <- ivreg(logWage ~ education | z1+z2, data = data)
summary(m4.6.3)
first_stage <- lm(edcation ~ z1+z2, data=data)
first_stage <- lm(education ~ z1+z2, data=data)
second_stage <- lm(logWage ~ first_stage$fitted)
second_stage <- lm(logWage ~ first_stage$fitted, data=data)
summary(second_stage)
tsls_model0 = ivreg(lwklywge ~ educ | factor(qob), data = Q30)
se_tsls0 = robust.se(tsls_model0)
se_tsls0
ols_model1 = lm(lwklywge ~ educ + factor(yob2), data = Q30)
se_ols1 = robust.se(ols_model1)[,2]
# OLS with age covariates
ols_model2 = lm(lwklywge ~ educ + factor(yob2) + ageq2 + I(ageq2**2), data = Q30)
se_ols2 = robust.se(ols_model2)[,2]
# OLS with race, city size, married, and region dummies
ols_model3 = lm(lwklywge ~ educ + factor(yob2) + race + married + smsa + neweng
+ midatl + enocent + wnocent + soatl +esocent + wsocent
+ mt, data = Q30)
se_ols3 = robust.se(ols_model3)[,2]
# OLS with all covariates
ols_model4 = lm(lwklywge ~ educ + factor(yob2) + race + married + smsa + neweng
+ midatl + enocent + wnocent + soatl +esocent + wsocent
+ mt + ageq2 + I(ageq2**2), data = Q30)
se_ols4 = robust.se(ols_model4)[,2]
# TSLS regression
tsls_model1 = ivreg(lwklywge ~ educ + factor(yob2) | factor(yob2) * factor(qob), data = Q30)
se_tsls1 = robust.se(tsls_model1)[,2]
# TSLS with age covariates
tsls_model2 = ivreg(lwklywge ~ educ + factor(yob2) + ageq2 + I(ageq2**2) | factor(yob2) * factor(qob) + ageq2 + I(ageq2**2), data = Q30)
se_tsls2 = robust.se(tsls_model2)[,2]
tsls_model2 = ivreg(lwklywge ~ educ + factor(yob2) + ageq2 + I(ageq2**2) | factor(yob2) * factor(qob) + ageq2 + I(ageq2**2), data = Q30)
se_tsls2 = robust.se(tsls_model2)[,2]
# TSLS with race, city size, married, and region dummies
tsls_model3 = ivreg(lwklywge ~ educ + factor(yob2) +  race + married + smsa + neweng
+ midatl + enocent + wnocent + soatl +esocent + wsocent
+ mt| factor(yob2) * factor(qob) + race + married + smsa + neweng
+ midatl + enocent + wnocent + soatl +esocent + wsocent
+ mt, data = Q30)
se_tsls3 = robust.se(tsls_model3)[,2]
# TSLS with all covariates
tsls_model4 = ivreg(lwklywge ~ educ + factor(yob2) +  race + married + smsa + neweng
+ midatl + enocent + wnocent + soatl +esocent + wsocent
+ race + married + smsa + neweng + midatl + enocent
+ mt + ageq2 + I(ageq2**2) | factor(yob2) * factor(qob)
+ wnocent + soatl +esocent + wsocent + mt + ageq2
+ I(ageq2**2), data = Q30)
se_tsls4 = robust.se(tsls_model4)[,2]
stargazer(ols_model1, tsls_model1, ols_model2, tsls_model2,
ols_model3, tsls_model3, ols_model4, tsls_model4,
se = list(se_ols1, se_tsls1, se_ols2, se_tsls2,
se_ols3, se_tsls3, se_ols4, se_tsls4),
covariate.labels=c("education", "age", "age squared", "race (1 = black)",
dep.var.labels = "Log Weekly Wage",
"married", "smsa (1 = city center)"),
omit.labels = c("9 year-of-birth dummies", "8 region-of-residence dummies"))
out = "QOB_table.htm", df= F,
omit = c("factor(yob2)*","neweng|midatl|enocent|wnocent|soatl|esocent|wsocent|mt"),
stargazer(ols_model1, tsls_model1, ols_model2, tsls_model2,
ols_model3, tsls_model3, ols_model4, tsls_model4,
se = list(se_ols1, se_tsls1, se_ols2, se_tsls2,
se_ols3, se_tsls3, se_ols4, se_tsls4),
covariate.labels=c("education", "age", "age squared", "race (1 = black)",
"married", "smsa (1 = city center)"),
dep.var.labels = "Log Weekly Wage",
omit = c("factor(yob2)*","neweng|midatl|enocent|wnocent|soatl|esocent|wsocent|mt"),
out = "QOB_table.htm", df= F,
omit.labels = c("9 year-of-birth dummies", "8 region-of-residence dummies"))
summary(tsls_model1)
summary(m4.6.3)
second_stage <- lm(logWage ~ first_stage$fitted, data=data)
summary(second_stage)
summary(ols_model1)
summary(tsls_model1)
Q30$yob2
summary(ols_model1)
summary(tsls_model1)
Q30$qob
first_stage <- lm(education ~ factor(z1)+factor(z2), data=data)
summary(first_stage)
first_stage <- lm(education ~ factor(z1)*factor(z2), data=data)
summary(first_stage)
first_stage <- lm(education ~ factor(z1)*factor(z2), data=data)
second_stage <- lm(data$logWage ~ first_stage$fitted)
summary(second_stage)
m4.6.3 <- ivreg(logWage ~ education | factor(z1)*factor(z2), data = data)
summary(m4.6.3)
m4.6.3 <- ivreg(logWage ~ education+experience | factor(z1)*factor(z2), data = data)
summary(m4.6.3)
m4.6.3 <- ivreg(logWage ~ education+experience+experienceSquare | factor(z1)*factor(z2), data = data)
summary(m4.6.3)
m4.6.3 <- ivreg(logWage ~ education+experience+experienceSquare+city+rural | factor(z1)*factor(z2), data = data)
data$z2
ols1 <- lm(logWage ~ education + experience, data=data)
ols2 <- lm(logWage ~ education + experience + experienceSquare + raceColor, data=data)
ols3 <- lm(logWage ~ education + experience + experienceSquare + raceColor
+ dad_education + mom_education, data=data)
ols4 <- lm(logWage ~ education + experience + experienceSquare + raceColor
+ dad_education + mom_education + rural + city, data=data)
tsls1 <- ivreg(logWage ~ education + experience | factor(z1)*factor(z2) + experience,
data = data)
tsls1 <- ivreg(logWage ~ education + experience | factor(z1)*factor(z2) + experience,
data = data)
tsls2 <- ivreg(logWage ~ education + experience + experienceSquare + raceColor |
factor(z1)*factor(z2) + experience + experienceSquare, data=data)
tsls3 <- ivreg(logWage ~ education + experience + experienceSquare + raceColor
+ dad_education + mom_education | factor(z1)*factor(z2) + experience
+ experienceSquare + dad_education + mom_education, data=data)
tsls3 <- ivreg(logWage ~ education + experience + experienceSquare + raceColor
+ dad_education + mom_education + rural + city | factor(z1)*factor(z2)
+ experience + experienceSquare + dad_education + mom_education
+ rural + city, data=data)
stargazer(ols1, tsls1, ols2, tsls2, ols3, tsls3, ols4, tsls4,
#se = list(se_ols1, se_tsls1, se_ols2, se_tsls2,
#          se_ols3, se_tsls3, se_ols4, se_tsls4),
covariate.labels=c("education", "experience", "experience squared",
"race (1 = black)",
"Dad Edu", "Mom Edu", "rural", "city"),
dep.var.labels = "Log Weekly Wage",
omit = c("factor(yob2)*","neweng|midatl|enocent|wnocent|soatl|esocent|wsocent|mt"),
out = "Q4_table.htm", df= F,
#omit.labels = c("9 year-of-birth dummies", "8 region-of-residence dummies")
)
tsls3 <- ivreg(logWage ~ education + experience + experienceSquare + raceColor
+ dad_education + mom_education | factor(z1)*factor(z2) + experience
+ experienceSquare + dad_education + mom_education, data=data)
tsls4 <- ivreg(logWage ~ education + experience + experienceSquare + raceColor
+ dad_education + mom_education + rural + city | factor(z1)*factor(z2)
+ experience + experienceSquare + dad_education + mom_education
+ rural + city, data=data)
stargazer(ols1, tsls1, ols2, tsls2, ols3, tsls3, ols4, tsls4,
#se = list(se_ols1, se_tsls1, se_ols2, se_tsls2,
#          se_ols3, se_tsls3, se_ols4, se_tsls4),
covariate.labels=c("education", "experience", "experience squared",
"race (1 = black)",
"Dad Edu", "Mom Edu", "rural", "city"),
dep.var.labels = "Log Weekly Wage",
omit = c("factor(yob2)*","neweng|midatl|enocent|wnocent|soatl|esocent|wsocent|mt"),
out = "Q4_table.htm", df= F,
#omit.labels = c("9 year-of-birth dummies", "8 region-of-residence dummies")
)
stargazer(ols1, tsls1, ols2, tsls2, ols3, tsls3, ols4, tsls4,
#se = list(se_ols1, se_tsls1, se_ols2, se_tsls2,
#          se_ols3, se_tsls3, se_ols4, se_tsls4),
covariate.labels=c("education", "experience", "experience squared",
"race (1 = black)", "Dad Edu", "Mom Edu"),
dep.var.labels = "Log Weekly Wage",
omit = c("factor(yob2)*","neweng|midatl|enocent|wnocent|soatl|esocent|wsocent|mt"),
out = "Q4_table.htm", df= F,
omit.labels = c("rural", "city")
)
stargazer(ols1, tsls1, ols2, tsls2, ols3, tsls3, ols4, tsls4,
se = list(se_ols1, se_tsls1, se_ols2, se_tsls2,
se_ols3, se_tsls3, se_ols4, se_tsls4),
covariate.labels=c("education", "experience", "experience squared",
"race (1 = black)", "dad Education", "mom education"),
dep.var.labels = "Log Weekly Wage",
#omit = c("factor(yob2)*","neweng|midatl|enocent|wnocent|soatl|esocent|wsocent|mt"),
out = "Q4_table.htm", df= F,
omit.labels = c("rural", "city")
)
stargazer(ols1, tsls1, ols2, tsls2, ols3, tsls3, ols4, tsls4,
se = list(se_ols1, se_tsls1, se_ols2, se_tsls2,
se_ols3, se_tsls3, se_ols4, se_tsls4),
covariate.labels=c("education", "experience", "experience squared",
"race (1 = black)", "dad Education", "mom education"),
dep.var.labels = "Log Weekly Wage",
omit = c("factor(yob2)*","neweng|midatl|enocent|wnocent|soatl|esocent|wsocent|mt"),
out = "Q4_table.htm", df= F,
omit.labels = c("rural", "city")
)
?stargazer
se_ols1 = robust.se(ols1)[,2]
se_ols2 = robust.se(ols2)[,2]
?robust.se
library(ivpack)
stargazer(ols1, tsls1, ols2, tsls2, ols3, tsls3, ols4, tsls4,
se = list(se_ols1, se_tsls1, se_ols2, se_tsls2,
se_ols3, se_tsls3, se_ols4, se_tsls4),
covariate.labels=c("education", "experience", "experience squared",
"race (1 = black)", "dad Education", "mom education"),
dep.var.labels = "Log Weekly Wage",
omit = c("factor(yob2)*","neweng|midatl|enocent|wnocent|soatl|esocent|wsocent|mt"),
out = "Q4_table.html", df= F,
omit.labels = c("rural", "city")
)
se_ols1 <- robust.se(ols1)[,2]
se_ols2 <- robust.se(ols2)[,2]
se_ols3 <- robust.se(ols3)[,2]
se_ols4 <- robust.se(ols4)[,2]
se_tsls1 <- robust.se(tsls1)[,2]
se_tsls1 <- robust.se(tsls1)[,2]
se_tsls2 <- robust.se(tsls2)[,2]
se_tsls3 <- robust.se(tsls3)[,2]
se_tsls4 <- robust.se(tsls4)[,2]
stargazer(ols1, tsls1, ols2, tsls2, ols3, tsls3, ols4, tsls4,
se = list(se_ols1, se_tsls1, se_ols2, se_tsls2,
se_ols3, se_tsls3, se_ols4, se_tsls4),
covariate.labels=c("education", "experience", "experience squared",
"race (1 = black)", "dad Education", "mom education"),
dep.var.labels = "Log Weekly Wage",
omit = c("factor(yob2)*","neweng|midatl|enocent|wnocent|soatl|esocent|wsocent|mt"),
out = "Q4_table.html", df= F,
omit.labels = c("rural", "city")
)
?stargazer
stargazer(ols1, tsls1, ols2, tsls2, ols3, tsls3, ols4, tsls4,
se = list(se_ols1, se_tsls1, se_ols2, se_tsls2,
se_ols3, se_tsls3, se_ols4, se_tsls4),
covariate.labels=c("education", "experience", "experience squared",
"race (1 = black)", "dad Education", "mom education"),
dep.var.labels = "Log Weekly Wage",
omit = c("factor(yob2)*","neweng|midatl|enocent|wnocent|soatl|esocent|wsocent|mt"),
out = "Q4_table.tex", df= F,
omit.labels = c("rural", "city")
)
stargazer(ols1, tsls1, ols2, tsls2, ols3, tsls3, ols4, tsls4,
se = list(se_ols1, se_tsls1, se_ols2, se_tsls2,
se_ols3, se_tsls3, se_ols4, se_tsls4),
covariate.labels=c("education", "experience", "experience squared",
"race (1 = black)", "dad Education", "mom education"),
dep.var.labels = "Log Weekly Wage",
omit = c("city*","rural"),
out = "Q4_table.html", df= F,
omit.labels = c("rural", "city")
)
setwd('~/GitHub/MIDS/MIDS-W271/lab2')
data <- read.csv("WageData2.csv", header = TRUE)
data5 <- read.csv("WageData2.csv", header = TRUE)
str(data)
data5 <- read.csv("wealthy_candidates.csv", header = TRUE)
str(data5)
View(data5)
summary(data5)
summary(m5)
m5 <- lm(voteshare ~ absolute_wealth, data = data5)
summary(m5)
m5 <- lm(voteshare ~ absolute_wealth + I(absolute_weath**2), data = data5)
m5 <- lm(voteshare ~ absolute_wealth + I(absolute_wealth**2), data = data5)
summary(m5)
View(data5)
panel.hist <- function(x, ...)
{
usr <- par("usr"); on.exit(par(usr))
par(usr = c(usr[1:2], 0, 1.5) )
h <- hist(x, plot = FALSE)
breaks <- h$breaks; nB <- length(breaks)
y <- h$counts; y <- y/max(y)
rect(breaks[-nB], 0, breaks[-1], y, col = "green", ...)
}
panel.cor <- function(x, y, digits = 2, prefix = "", cex.cor, ...)
{
usr <- par("usr"); on.exit(par(usr))
par(usr = c(0, 1, 0, 1))
r <- abs(cor(x, y, use='complete.obs'))
txt <- format(c(r, 0.123456789), digits = digits)[1]
txt <- paste0(prefix, txt)
if(missing(cex.cor)) cex.cor <- 0.8/strwidth(txt)
text(0.5, 0.5, txt, cex = cex.cor * r)
}
pairs(voteshare~absolute_wealth + url + lit, data=data, upper.panel=panel.smooth, lower.panel=panel.cor, diag.panel=panel.hist, main='shared vote, wealth, urban, literate')
pairs(voteshare~absolute_wealth + url + lit, data=data5, upper.panel=panel.smooth, lower.panel=panel.cor, diag.panel=panel.hist, main='shared vote, wealth, urban, literate')
pairs(voteshare~absolute_wealth + urb + lit, data=data5, upper.panel=panel.smooth, lower.panel=panel.cor, diag.panel=panel.hist, main='shared vote, wealth, urban, literate')
plot(m5)
boxplot(data5$absolute_wealth)
max(data5$absolute_wealth)
max(data5$absolute_wealth, na.rm=T)
View(data5)
sum(is.na(data5$absolute_wealth))
is.na(data5$absolute_wealth)
data5[is.na(data5$absolute_wealth),]
summary(data5$region)
hist(data5[data5$absolute_wealth!=max(data5$absolute_wealth), 'absolute_wealth'])
hist(data5[data5$absolute_wealth!=max(data5$absolute_wealth), 'absolute_wealth'], breaks=50)
hist(data5[data5$absolute_wealth!=max(data5$absolute_wealth), c('absolute_wealth')], breaks=50)
data5[data5$absolute_wealth==max(data5$absolute_wealth),]
max(data5$absolute_wealth)
data5[data5$absolute_wealth==max(data5$absolute_wealth,na.rm=T),]
data5[is.na(data5$absolute_wealth),]
data5$absolute_wealth==max(data5$absolute_wealth,na.rm=T)
data5.2 <- data5[-c(2119,177),]
hist(data5.2$absolute_wealth)
hist(data5.2$absolute_wealth, breaks=50)
a <- tail(sort(data5$absolute_wealth),5)
a
data5[data5$absolute_wealth=a[4],]
data5[data5$absolute_wealth==a[4],]
data5[data5$absolute_wealth==a[4],][0]
data5.2 <- data5[-c(2119,177,1322),]
hist(data5.2$absolute_wealth, breaks=50)
hist(log10(data5.2$absolute_wealth), breaks=50)
min(data5$absolute_wealth)
min(data5$absolute_wealth,na.rm=T)
sum(data5$absolute_wealth==2)
sum(data5.2$absolute_wealth==2)
View(data5)
data5[data5$absolute_wealth==2,]
hist(log10(data5$absolute_wealth), breaks=50)
data5$logWealth = log10(data5$absolute_wealth)
summary(lm(voteshare~absolute_wealth, data=data5))
test<-data5[data5$absolute_wealth!=2,]
hist(test$absolute_wealth)
hist(log10(test$absolute_wealth))
hist(log10(test$absolute_wealth), break=50)
hist(log10(test$absolute_wealth), breaks=50)
hist(log(test$absolute_wealth), breaks=50)
summary(lm(voteshare~absolute_wealth, data=test))
test$logWealth=log(test$absolute_wealth)
hist(test$logWealth)
summary(lm(voteshare~logWealth, data=test))
sum(data5$absolute_wealth==2)
sum(data5$absolute_wealth==2, na.rm=T)
scatterplot(test$absolute_wealth, test$voteshare)
scatterplot(log(test$absolute_wealth), test$voteshare)
hist(log(data5$absolute_wealth))
hist(log(data5$absolute_wealth), breaks=50)
data5
summary(data5)
hist(data5$logWealth)
summary(lm(voteshare~logWealth, data=data5))
summary(lm(voteshare~logWealth, data=test))
scatterplot(log(data5$absolute_wealth), data5$voteshare)
hist(data5$voteshare)
pairs(voteshare~logWealth + urb + lit, data=data5, upper.panel=panel.smooth, lower.panel=panel.cor, diag.panel=panel.hist, main='shared vote, wealth, urban, literate')
data5$logWealth = log(data5$absolute_wealth)
hist(data5$logWealth)
hist(data5$logWealth, breaks=50)
hist(data5$absolute_wealth^2)
hist(log(data5$absolute_wealth^2))
hist(log(data5$absolute_wealth^2),breaks=50)
sum(data5$absolute_wealth==2)
sum(data5$absolute_wealth==2,na.rm=T)
log(2)
data5$logWealth = log(data5$absolute_wealth)
hist(data5$logWealth, breaks=50)
m5 <- lm(voteshare ~ logWealth, data = data5)
summary(m5)
plot(m5)
m5 <- lm(voteshare ~ logWealth + I(logWealth**2), data = data5)
summary(m5)
summary(data5)
m5 <- lm(voteshare ~ logWealth+factor(region), data = data5)
summary(m5)
m5 <- lm(voteshare ~ logWealth*factor(region), data = data5)
summary(m5)
coeftest(ols_model0, vcov = vcovHC)
coeftest(m5, vcov = vcovHC)
data5 <- read.csv("wealthy_candidates.csv", header = TRUE)
str(data5)
data5$logWealth = log(data5$absolute_wealth)
hist(data5$logWealth, breaks=50)
```
m5 <- lm(voteshare ~ logWealth, data = data5)
summary(m5)
m5 <- lm(voteshare ~ logWealth + I(logWealth**2), data = data5)
summary(m5)
m5 <- lm(voteshare ~ logWealth*factor(region), data = data5)
summary(m5)
coeftest(m5, vcov = vcovHC)
